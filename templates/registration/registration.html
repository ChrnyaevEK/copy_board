{% extends "copy_board/html/base.html" %}
{% block content %}
<div class="container">
    <p class="center"><strong>Create an account</strong></p>
    <div class="row">
        <div class="col s12 offset-s0 l4 offset-l4">
            <p class="center red lighten-3 white-text" field="error"></p>
        </div>
    </div>
    <form id="id_registration_form" v-on:submit.prevent.stop="create">
        {% csrf_token %}
        <div class="row">
            <div class="col s12 offset-s0 l4 offset-l4">
                {{ form.username.label_tag }}
                {{ form.username }}
            </div>
        </div>
        <div class="row">
            <div class="col s12 offset-s0 l4 offset-l4">
                {{ form.email.label_tag }}
                {{ form.email }}
            </div>
        </div>
        <div class="row">
            <div class="col s12 offset-s0 l4 offset-l4">
                {{ form.password1.label_tag }}
                {{ form.password1 }}
            </div>
        </div>
        <div class="row">
            <div class="col s12 offset-s0 l4 offset-l4">
                {{ form.password2.label_tag }}
                {{ form.password2 }}
            </div>
        </div>
        <div class="row">
            <div class="col s12 offset-s0 l4 offset-l4 center">
                <input type="submit" value="register" class="btn"/>
            </div>
            <input type="hidden" name="next" value="{% url 'main_workspace' %}"/>
        </div>
    </form>
</div>
{% endblock %}
{% block inject %}
<script>
registration_form = new Vue({
    el: '#id_registration_form',
    methods: {
        create: function() {
            $.post({
                url: "{% url 'registration' %}",
                data: $(this.$el).serialize(),
                error: (response)=>{
                    Toaster.toast(response.responseText)
                }
            })
        }
    }
})
</script>
{% endblock %}